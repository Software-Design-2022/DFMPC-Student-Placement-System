{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { createPermissionHook, Platform, UnavailabilityError } from 'expo-modules-core';\nimport NotificationPermissionsModule from \"./NotificationPermissionsModule\";\nexport function getPermissionsAsync() {\n  return _regeneratorRuntime.async(function getPermissionsAsync$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (NotificationPermissionsModule.getPermissionsAsync) {\n            _context.next = 2;\n            break;\n          }\n\n          throw new UnavailabilityError('Notifications', 'getPermissionsAsync');\n\n        case 2:\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(NotificationPermissionsModule.getPermissionsAsync());\n\n        case 4:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function requestPermissionsAsync(permissions) {\n  var requestedPermissions, requestedPlatformPermissions;\n  return _regeneratorRuntime.async(function requestPermissionsAsync$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if (NotificationPermissionsModule.requestPermissionsAsync) {\n            _context2.next = 2;\n            break;\n          }\n\n          throw new UnavailabilityError('Notifications', 'requestPermissionsAsync');\n\n        case 2:\n          requestedPermissions = permissions != null ? permissions : {\n            ios: {\n              allowAlert: true,\n              allowBadge: true,\n              allowSound: true\n            }\n          };\n          requestedPlatformPermissions = requestedPermissions[Platform.OS];\n          _context2.next = 6;\n          return _regeneratorRuntime.awrap(NotificationPermissionsModule.requestPermissionsAsync(requestedPlatformPermissions));\n\n        case 6:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 7:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport var usePermissions = createPermissionHook({\n  requestMethod: requestPermissionsAsync,\n  getMethod: getPermissionsAsync\n});","map":{"version":3,"mappings":";AAAA,SAASA,oBAAT,EAA+BC,QAA/B,EAAyCC,mBAAzC,QAAoE,mBAApE;AAMA,OAAOC,6BAAP;AAEA,OAAO,SAAeC,mBAAf;EAAA;IAAA;MAAA;QAAA;UAAA,IACAD,6BAA6B,CAACC,mBAD9B;YAAA;YAAA;UAAA;;UAAA,MAEG,IAAIF,mBAAJ,CAAwB,eAAxB,EAAyC,qBAAzC,CAFH;;QAAA;UAAA;UAAA,iCAKQC,6BAA6B,CAACC,mBAA9B,EALR;;QAAA;UAAA;;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA;AAQP,OAAO,SAAeC,uBAAf,CAAuCC,WAAvC;EAAA;EAAA;IAAA;MAAA;QAAA;UAAA,IACAH,6BAA6B,CAACE,uBAD9B;YAAA;YAAA;UAAA;;UAAA,MAEG,IAAIH,mBAAJ,CAAwB,eAAxB,EAAyC,yBAAzC,CAFH;;QAAA;UAKCK,oBALD,GAKwBD,WALxB,WAKwBA,WALxB,GAKuC;YAC1CE,GAAG,EAAE;cACHC,UAAU,EAAE,IADT;cAEHC,UAAU,EAAE,IAFT;cAGHC,UAAU,EAAE;YAHT;UADqC,CALvC;UAYCC,4BAZD,GAYgCL,oBAAoB,CAACN,QAAQ,CAACY,EAAV,CAZpD;UAAA;UAAA,iCAaQV,6BAA6B,CAACE,uBAA9B,CAAsDO,4BAAtD,CAbR;;QAAA;UAAA;;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA;AA0BP,OAAO,IAAME,cAAc,GAAGd,oBAAoB,CAGhD;EACAe,aAAa,EAAEV,uBADf;EAEAW,SAAS,EAAEZ;AAFX,CAHgD,CAA3C","names":["createPermissionHook","Platform","UnavailabilityError","NotificationPermissionsModule","getPermissionsAsync","requestPermissionsAsync","permissions","requestedPermissions","ios","allowAlert","allowBadge","allowSound","requestedPlatformPermissions","OS","usePermissions","requestMethod","getMethod"],"sourceRoot":"","sources":["../src/NotificationPermissions.ts"],"sourcesContent":["import { createPermissionHook, Platform, UnavailabilityError } from 'expo-modules-core';\n\nimport {\n  NotificationPermissionsRequest,\n  NotificationPermissionsStatus,\n} from './NotificationPermissions.types';\nimport NotificationPermissionsModule from './NotificationPermissionsModule';\n\nexport async function getPermissionsAsync() {\n  if (!NotificationPermissionsModule.getPermissionsAsync) {\n    throw new UnavailabilityError('Notifications', 'getPermissionsAsync');\n  }\n\n  return await NotificationPermissionsModule.getPermissionsAsync();\n}\n\nexport async function requestPermissionsAsync(permissions?: NotificationPermissionsRequest) {\n  if (!NotificationPermissionsModule.requestPermissionsAsync) {\n    throw new UnavailabilityError('Notifications', 'requestPermissionsAsync');\n  }\n\n  const requestedPermissions = permissions ?? {\n    ios: {\n      allowAlert: true,\n      allowBadge: true,\n      allowSound: true,\n    },\n  };\n  const requestedPlatformPermissions = requestedPermissions[Platform.OS];\n  return await NotificationPermissionsModule.requestPermissionsAsync(requestedPlatformPermissions);\n}\n\n// @needsAudit\n/**\n * Check or request permissions to send and receive push notifications.\n * This uses both `requestPermissionsAsync` and `getPermissionsAsync` to interact with the permissions.\n *\n * @example\n * ```ts\n * const [status, requestPermission] = Notifications.usePermissions();\n * ```\n */\nexport const usePermissions = createPermissionHook<\n  NotificationPermissionsStatus,\n  NotificationPermissionsRequest\n>({\n  requestMethod: requestPermissionsAsync,\n  getMethod: getPermissionsAsync,\n});\n"]},"metadata":{},"sourceType":"module"}