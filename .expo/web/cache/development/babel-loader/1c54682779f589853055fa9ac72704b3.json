{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport XDate from 'xdate';\nimport React from 'react';\nimport { toMarkingFormat } from \"../../interface\";\nimport constants from \"../../commons/constants\";\nimport { generateDay } from \"../../dateutils\";\nimport { UpdateSources } from \"../commons\";\nvar NUMBER_OF_PAGES = 2;\nvar Presenter = function () {\n  function Presenter() {\n    var _this = this;\n    _classCallCheck(this, Presenter);\n    this._applyAndroidRtlFix = constants.isAndroid && constants.isRTL;\n    this._firstAndroidRTLScrollIgnored = !this._applyAndroidRtlFix;\n    this.list = React.createRef();\n    this.scrollToIndex = function (animated) {\n      var _this$list, _this$list$current;\n      (_this$list = _this.list) == null ? void 0 : (_this$list$current = _this$list.current) == null ? void 0 : _this$list$current.scrollToIndex({\n        animated: animated,\n        index: NUMBER_OF_PAGES\n      });\n    };\n    this.onDayPress = function (context, value) {\n      context.setDate == null ? void 0 : context.setDate(value.dateString, UpdateSources.DAY_PRESS);\n    };\n    this.onScroll = function (_ref) {\n      var context = _ref.context,\n        updateState = _ref.updateState,\n        x = _ref.x,\n        page = _ref.page,\n        items = _ref.items,\n        width = _ref.width;\n      if (!_this._firstAndroidRTLScrollIgnored) {\n        _this._firstAndroidRTLScrollIgnored = true;\n        return;\n      }\n      x = _this._getX(x, items == null ? void 0 : items.length, width);\n      var newPage = _this._getNewPage(x, width);\n      if (_this._shouldUpdateState(page, newPage)) {\n        context.setDate == null ? void 0 : context.setDate(items[newPage], UpdateSources.WEEK_SCROLL);\n        var data = _this._getItemsForPage(newPage, items);\n        updateState(data, newPage);\n      }\n    };\n    this.onMomentumScrollEnd = function (_ref2) {\n      var items = _ref2.items,\n        props = _ref2.props,\n        page = _ref2.page,\n        updateItems = _ref2.updateItems;\n      if (_this._isFirstPage(page) || _this._isLastPage(page, items)) {\n        _this.scrollToIndex(false);\n        var newWeekArray = _this.getDatesArray(props);\n        var updatedItems;\n        if (_this._isLastPage(page, items)) {\n          updatedItems = _this._mergeArraysFromEnd(items, newWeekArray);\n        } else {\n          updatedItems = _this._mergeArraysFromTop(items, newWeekArray);\n        }\n        updateItems(updatedItems);\n      }\n    };\n    this.shouldComponentUpdate = function (context, prevContext) {\n      var date = context.date,\n        updateSource = context.updateSource,\n        numberOfDays = context.numberOfDays;\n      return date !== prevContext.date && updateSource !== UpdateSources.WEEK_SCROLL || numberOfDays !== prevContext.numberOfDays;\n    };\n    this.getDatesArray = function (args) {\n      var array = [];\n      for (var index = -NUMBER_OF_PAGES; index <= NUMBER_OF_PAGES; index++) {\n        var d = _this.getDate(args, index);\n        array.push(d);\n      }\n      return array;\n    };\n    this._shouldUpdateState = function (page, newPage) {\n      return page !== newPage;\n    };\n    this._getX = function (x, itemsCount, containerWidth) {\n      if (_this._applyAndroidRtlFix) {\n        var numberOfPages = itemsCount - 1;\n        var overallWidth = numberOfPages * containerWidth;\n        return overallWidth - x;\n      }\n      return x;\n    };\n    this._getNewPage = function (x, containerWidth) {\n      return Math.round(x / containerWidth);\n    };\n    this._isFirstPage = function (page) {\n      return page === 0;\n    };\n    this._isLastPage = function (page, items) {\n      return page === items.length - 1;\n    };\n    this._getNextPageItems = function (items) {\n      return items.map(function (_, i) {\n        var index = i <= NUMBER_OF_PAGES ? i + NUMBER_OF_PAGES : i;\n        return items[index];\n      });\n    };\n    this._getFirstPageItems = function (items) {\n      return items.map(function (_, i) {\n        var index = i >= NUMBER_OF_PAGES ? i - NUMBER_OF_PAGES : i;\n        return items[index];\n      });\n    };\n    this._mergeArraysFromEnd = function (items, newArray) {\n      for (var i = NUMBER_OF_PAGES + 1; i < items.length; i++) {\n        items[i] = newArray[i];\n      }\n      return items;\n    };\n    this._mergeArraysFromTop = function (items, newArray) {\n      for (var i = 0; i < NUMBER_OF_PAGES; i++) {\n        items[i] = newArray[i];\n      }\n      return items;\n    };\n    this._getItemsForPage = function (page, items) {\n      if (_this._isLastPage(page, items)) {\n        return _this._getNextPageItems(items);\n      } else if (_this._isFirstPage(page)) {\n        return _this._getFirstPageItems(items);\n      }\n      return items;\n    };\n  }\n  _createClass(Presenter, [{\n    key: \"getDate\",\n    value: function getDate(_ref3, weekIndex) {\n      var current = _ref3.current,\n        context = _ref3.context,\n        _ref3$firstDay = _ref3.firstDay,\n        firstDay = _ref3$firstDay === void 0 ? 0 : _ref3$firstDay;\n      var d = new XDate(current || context.date);\n      var numberOfDays = context.numberOfDays;\n      var dayOfTheWeek = d.getDay();\n      if (dayOfTheWeek < firstDay && firstDay > 0) {\n        dayOfTheWeek = 7 + dayOfTheWeek;\n      }\n      if (numberOfDays > 1) {\n        return generateDay(d, weekIndex * numberOfDays);\n      } else {\n        var dd = weekIndex === 0 ? d : d.addDays(firstDay - dayOfTheWeek);\n        return toMarkingFormat(dd.addWeeks(weekIndex));\n      }\n    }\n  }]);\n  return Presenter;\n}();\nexport default Presenter;","map":{"version":3,"names":["XDate","React","toMarkingFormat","constants","generateDay","UpdateSources","NUMBER_OF_PAGES","Presenter","_applyAndroidRtlFix","isAndroid","isRTL","_firstAndroidRTLScrollIgnored","list","createRef","scrollToIndex","animated","current","index","onDayPress","context","value","setDate","dateString","DAY_PRESS","onScroll","updateState","x","page","items","width","_getX","length","newPage","_getNewPage","_shouldUpdateState","WEEK_SCROLL","data","_getItemsForPage","onMomentumScrollEnd","props","updateItems","_isFirstPage","_isLastPage","newWeekArray","getDatesArray","updatedItems","_mergeArraysFromEnd","_mergeArraysFromTop","shouldComponentUpdate","prevContext","date","updateSource","numberOfDays","args","array","d","getDate","push","itemsCount","containerWidth","numberOfPages","overallWidth","Math","round","_getNextPageItems","map","_","i","_getFirstPageItems","newArray","weekIndex","firstDay","dayOfTheWeek","getDay","dd","addDays","addWeeks"],"sources":["D:/repos/DFMPC-Student-Placement-System/node_modules/react-native-calendars/src/expandableCalendar/WeekCalendar/presenter.js"],"sourcesContent":["import XDate from 'xdate';\nimport React from 'react';\nimport { toMarkingFormat } from '../../interface';\nimport constants from '../../commons/constants';\nimport { generateDay } from '../../dateutils';\nimport { UpdateSources } from '../commons';\n// must be a positive number\nconst NUMBER_OF_PAGES = 2;\nclass Presenter {\n    _applyAndroidRtlFix = constants.isAndroid && constants.isRTL;\n    // On Android+RTL there's an initial scroll that cause issues\n    _firstAndroidRTLScrollIgnored = !this._applyAndroidRtlFix;\n    list = React.createRef();\n    scrollToIndex = (animated) => {\n        this.list?.current?.scrollToIndex({ animated, index: NUMBER_OF_PAGES });\n    };\n    // Events\n    onDayPress = (context, value) => {\n        context.setDate?.(value.dateString, UpdateSources.DAY_PRESS);\n    };\n    onScroll = ({ context, updateState, x, page, items, width }) => {\n        if (!this._firstAndroidRTLScrollIgnored) {\n            this._firstAndroidRTLScrollIgnored = true;\n            return;\n        }\n        x = this._getX(x, items?.length, width);\n        const newPage = this._getNewPage(x, width);\n        if (this._shouldUpdateState(page, newPage)) {\n            context.setDate?.(items[newPage], UpdateSources.WEEK_SCROLL);\n            const data = this._getItemsForPage(newPage, items);\n            updateState(data, newPage);\n        }\n    };\n    onMomentumScrollEnd = ({ items, props, page, updateItems }) => {\n        if (this._isFirstPage(page) || this._isLastPage(page, items)) {\n            this.scrollToIndex(false);\n            const newWeekArray = this.getDatesArray(props);\n            let updatedItems;\n            if (this._isLastPage(page, items)) {\n                updatedItems = this._mergeArraysFromEnd(items, newWeekArray);\n            }\n            else {\n                updatedItems = this._mergeArraysFromTop(items, newWeekArray);\n            }\n            updateItems(updatedItems);\n        }\n    };\n    shouldComponentUpdate = (context, prevContext) => {\n        const { date, updateSource, numberOfDays } = context;\n        return ((date !== prevContext.date && updateSource !== UpdateSources.WEEK_SCROLL) ||\n            numberOfDays !== prevContext.numberOfDays);\n    };\n    getDate({ current, context, firstDay = 0 }, weekIndex) {\n        const d = new XDate(current || context.date);\n        const numberOfDays = context.numberOfDays;\n        // get the first day of the week as date (for the on scroll mark)\n        let dayOfTheWeek = d.getDay();\n        if (dayOfTheWeek < firstDay && firstDay > 0) {\n            dayOfTheWeek = 7 + dayOfTheWeek;\n        }\n        if (numberOfDays > 1) {\n            return generateDay(d, weekIndex * numberOfDays);\n        }\n        else {\n            // leave the current date in the visible week as is\n            const dd = weekIndex === 0 ? d : d.addDays(firstDay - dayOfTheWeek);\n            return toMarkingFormat(dd.addWeeks(weekIndex));\n        }\n    }\n    getDatesArray = (args) => {\n        const array = [];\n        for (let index = -NUMBER_OF_PAGES; index <= NUMBER_OF_PAGES; index++) {\n            const d = this.getDate(args, index);\n            array.push(d);\n        }\n        return array;\n    };\n    _shouldUpdateState = (page, newPage) => {\n        return page !== newPage;\n    };\n    _getX = (x, itemsCount, containerWidth) => {\n        if (this._applyAndroidRtlFix) {\n            const numberOfPages = itemsCount - 1;\n            const overallWidth = numberOfPages * containerWidth;\n            return overallWidth - x;\n        }\n        return x;\n    };\n    _getNewPage = (x, containerWidth) => {\n        return Math.round(x / containerWidth);\n    };\n    _isFirstPage = (page) => {\n        return page === 0;\n    };\n    _isLastPage = (page, items) => {\n        return page === items.length - 1;\n    };\n    _getNextPageItems = (items) => {\n        return items.map((_, i) => {\n            const index = i <= NUMBER_OF_PAGES ? i + NUMBER_OF_PAGES : i;\n            return items[index];\n        });\n    };\n    _getFirstPageItems = (items) => {\n        return items.map((_, i) => {\n            const index = i >= NUMBER_OF_PAGES ? i - NUMBER_OF_PAGES : i;\n            return items[index];\n        });\n    };\n    _mergeArraysFromEnd = (items, newArray) => {\n        for (let i = NUMBER_OF_PAGES + 1; i < items.length; i++) {\n            items[i] = newArray[i];\n        }\n        return items;\n    };\n    _mergeArraysFromTop = (items, newArray) => {\n        for (let i = 0; i < NUMBER_OF_PAGES; i++) {\n            items[i] = newArray[i];\n        }\n        return items;\n    };\n    _getItemsForPage = (page, items) => {\n        if (this._isLastPage(page, items)) {\n            return this._getNextPageItems(items);\n        }\n        else if (this._isFirstPage(page)) {\n            return this._getFirstPageItems(items);\n        }\n        return items;\n    };\n}\nexport default Presenter;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}