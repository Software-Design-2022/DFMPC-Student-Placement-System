{"ast":null,"code":"import React from \"react\";\nimport MicrosoftLogin from \"react-microsoft-login\";\nimport { useNavigation } from \"@react-navigation/core\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport \"../global\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction setUserVariables(data) {\n  authUser = data;\n  authUserID = data.child(\"id\").val();\n  authName = authUser.child(\"user_FirstName\").val();\n  authLastName = authUser.child(\"user_LastName\").val();\n  authUserProfilePic = authUser.child(\"user_profile_photo/\").val();\n  authUserRef = firebase.database().ref(\"/users\") + \"/\" + authUserID + \"/\";\n  console.log(\"User ID: \" + authUserID + \" authenticated.\");\n}\n\nexport function retrieveUser() {\n  firebase.database().ref(\"/users\").once(\"value\", function (snapshot) {\n    snapshot.forEach(function (childSnapshot) {\n      var childData = childSnapshot.val();\n\n      if (childData.user_Email == authEmail) {\n        found = true;\n        setUserVariables(childSnapshot);\n      }\n    });\n  }).then(function () {\n    if (!found) {\n      navigation.navigate(\"Register\");\n    }\n  });\n}\nexport default (function (props) {\n  var navigation = useNavigation();\n\n  var authHandler = function authHandler(err, data) {\n    console.log(err, data);\n    MSuser = data;\n    console.log(MSuser.account.userName);\n    authEmail = MSuser.account.userName;\n    navigation.navigate(\"Dashboard\");\n    retrieveUser();\n    console.log(\"User ID: \" + authUserID + \" authenticated.\");\n  };\n\n  return _jsx(MicrosoftLogin, {\n    clientId: \"2601b63e-4012-441c-a18d-d6d8e4cd6a29\",\n    authCallback: authHandler\n  });\n});","map":{"version":3,"names":["React","MicrosoftLogin","useNavigation","setUserVariables","data","authUser","authUserID","child","val","authName","authLastName","authUserProfilePic","authUserRef","firebase","database","ref","console","log","retrieveUser","once","snapshot","forEach","childSnapshot","childData","user_Email","authEmail","found","then","navigation","navigate","props","authHandler","err","MSuser","account","userName"],"sources":["C:/Users/nokno/OneDrive/Documents/GitHub/DFMPC-Student-Placement-System/Screens/LoginMicrosoft.js"],"sourcesContent":["import React from \"react\";\r\nimport MicrosoftLogin from \"react-microsoft-login\";\r\nimport { useNavigation } from \"@react-navigation/core\";\r\nimport { Button } from \"react-native-web\";\r\nimport \"../global\";\r\n\r\n\r\nfunction setUserVariables(data) {\r\n  // store information about the user who is currently logged in\r\n  authUser = data;\r\n  authUserID = data.child(\"id\").val();\r\n  //authStudentNumber= authUser.child(\"\")user_FirstName\r\n\r\n  authName = authUser.child(\"user_FirstName\").val();\r\n  authLastName = authUser.child(\"user_LastName\").val();\r\n  authUserProfilePic = authUser.child(\"user_profile_photo/\").val();\r\n  authUserRef = firebase.database().ref(\"/users\") + \"/\" + authUserID + \"/\";\r\n  console.log(\"User ID: \" + authUserID + \" authenticated.\");\r\n}\r\n\r\nexport function retrieveUser() {\r\nfirebase\r\n  .database()\r\n  .ref(\"/users\")\r\n  .once(\"value\", function (snapshot) {\r\n    snapshot.forEach(function (childSnapshot) {\r\n      var childData = childSnapshot.val();\r\n      if (childData.user_Email == authEmail) {\r\n        found = true;\r\n        setUserVariables(childSnapshot);\r\n      }\r\n    });\r\n  })\r\n  .then(() => {\r\n    if (!found) {\r\n      navigation.navigate(\"Register\");\r\n    }\r\n  });\r\n}\r\n\r\n\r\n\r\nexport default (props) => {\r\n  const navigation = useNavigation(); //navigation between screens\r\n\r\n  const authHandler = (err, data) => {\r\n    console.log(err, data);\r\n    MSuser = data;\r\n    console.log(MSuser.account.userName);\r\n    authEmail = MSuser.account.userName;\r\n    navigation.navigate(\"Dashboard\");\r\n    retrieveUser();\r\n    console.log(\"User ID: \" + authUserID + \" authenticated.\");\r\n  };\r\n  return (\r\n    <MicrosoftLogin clientId={\"2601b63e-4012-441c-a18d-d6d8e4cd6a29\"} authCallback={authHandler} />\r\n  );\r\n};"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,cAAP,MAA2B,uBAA3B;AACA,SAASC,aAAT,QAA8B,wBAA9B;;AAEA;;;AAGA,SAASC,gBAAT,CAA0BC,IAA1B,EAAgC;EAE9BC,QAAQ,GAAGD,IAAX;EACAE,UAAU,GAAGF,IAAI,CAACG,KAAL,CAAW,IAAX,EAAiBC,GAAjB,EAAb;EAGAC,QAAQ,GAAGJ,QAAQ,CAACE,KAAT,CAAe,gBAAf,EAAiCC,GAAjC,EAAX;EACAE,YAAY,GAAGL,QAAQ,CAACE,KAAT,CAAe,eAAf,EAAgCC,GAAhC,EAAf;EACAG,kBAAkB,GAAGN,QAAQ,CAACE,KAAT,CAAe,qBAAf,EAAsCC,GAAtC,EAArB;EACAI,WAAW,GAAGC,QAAQ,CAACC,QAAT,GAAoBC,GAApB,CAAwB,QAAxB,IAAoC,GAApC,GAA0CT,UAA1C,GAAuD,GAArE;EACAU,OAAO,CAACC,GAAR,CAAY,cAAcX,UAAd,GAA2B,iBAAvC;AACD;;AAED,OAAO,SAASY,YAAT,GAAwB;EAC/BL,QAAQ,CACLC,QADH,GAEGC,GAFH,CAEO,QAFP,EAGGI,IAHH,CAGQ,OAHR,EAGiB,UAAUC,QAAV,EAAoB;IACjCA,QAAQ,CAACC,OAAT,CAAiB,UAAUC,aAAV,EAAyB;MACxC,IAAIC,SAAS,GAAGD,aAAa,CAACd,GAAd,EAAhB;;MACA,IAAIe,SAAS,CAACC,UAAV,IAAwBC,SAA5B,EAAuC;QACrCC,KAAK,GAAG,IAAR;QACAvB,gBAAgB,CAACmB,aAAD,CAAhB;MACD;IACF,CAND;EAOD,CAXH,EAYGK,IAZH,CAYQ,YAAM;IACV,IAAI,CAACD,KAAL,EAAY;MACVE,UAAU,CAACC,QAAX,CAAoB,UAApB;IACD;EACF,CAhBH;AAiBC;AAID,gBAAe,UAACC,KAAD,EAAW;EACxB,IAAMF,UAAU,GAAG1B,aAAa,EAAhC;;EAEA,IAAM6B,WAAW,GAAG,SAAdA,WAAc,CAACC,GAAD,EAAM5B,IAAN,EAAe;IACjCY,OAAO,CAACC,GAAR,CAAYe,GAAZ,EAAiB5B,IAAjB;IACA6B,MAAM,GAAG7B,IAAT;IACAY,OAAO,CAACC,GAAR,CAAYgB,MAAM,CAACC,OAAP,CAAeC,QAA3B;IACAV,SAAS,GAAGQ,MAAM,CAACC,OAAP,CAAeC,QAA3B;IACAP,UAAU,CAACC,QAAX,CAAoB,WAApB;IACAX,YAAY;IACZF,OAAO,CAACC,GAAR,CAAY,cAAcX,UAAd,GAA2B,iBAAvC;EACD,CARD;;EASA,OACE,KAAC,cAAD;IAAgB,QAAQ,EAAE,sCAA1B;IAAkE,YAAY,EAAEyB;EAAhF,EADF;AAGD,CAfD"},"metadata":{},"sourceType":"module"}